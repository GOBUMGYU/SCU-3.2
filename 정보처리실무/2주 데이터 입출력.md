### 데이터 저장소 : 데이터들을 논리적인 구조로 조직화하거나 물리적인 공간에 구축한 것

논리 데이터저장소 : 데이터 및 데이터 간의 연관성, 제약조건을 식별하여 논리적인 구조로 조직화한 것 

물리 데이터 저장소 : 논리 데이터저장소를 실제 저장장치에 저장한 것 

### 데이터베이스(DataBase)

여러 사람에 의해 공동으로 사용될 데이터를 중복을 배제하여 통합하고 쉽게 접급하여 처리할 수 있도록 저장장치에 저장하여 항상 사용할 수 있도록 운영하는 운영데이터

### 데이터베이스의 정의

**통합데이터(Integrated Data)** : 자료의 **중복을 배제**한 데이터의 모임

**저장데이터(Stored Data)** : 저장 매체에 **저장**된 자료

**운영데이터(Operational Data)** : 조직의 고유 **업무를 수행**하는데 반드시 필요한 자료 

**공용데이터(Shared Data)** : 여러 응용 시스템들이 **공동**으로 소유하고 유지하는 자료

### 데이터베이스 관리 시스템 DBMS

사용자의 요구에 따라 정보를 생성해주고, **데이터베이스를 관리해주는 소프트웨어**

- 기존 파일 시스템이 가지는 데이터의 종속성과 중복성의 문제를 해결하기 위해 제안된 시스템

### 데이터베이스 관리 시스템의 기능

**정의 기능** : 데이터의 **타입과 구조에 대한 정의, 이용방식, 제약 조건** 등을 명시하는 기능

**조작 기능** : 데이터 **검색, 삽입, 갱신, 삭제** 등을 위해 **인터페이스** 수단을 제공하는 기능

**제어 기능** : 데이터의 **무결성, 보안, 권한 검사, 병행 제어**를 제공하는 기능

### 데이터의 독립성

**논리적 독립성**

응용 프로그램과 데이터베이스를 독립시켜 데이터의 논리적 구조를 변경시키더라도 응용 프로그램은 영향을 받지 않음

**물리적 독립성**

응용 프로그램과 보조기억장치 같은 물리적 장치를 독립시켜 디스크를 추가/변경하더라도 응용 프로그램은 영향을 받지 않음

### 스키마

데이터베이스의 구조와 제약조건에 관한 전반적인 명세를 기술한 것 

**외부 스키마** : 사용자나 응용 프로그래머가 각 개인의 입장에서 필요로 하는 데이터베이스의 논리적 구조를 정의한 것

**개념스키마** : 데이터베이스의 전체적인 논리적 구조 

**내부스키마 :** 물리적 저장장치의 입장에서 본 데이터베이스 구조, 레코드의 형식, 데이터 항목의 표현방법, 내부 레코드의 물리적 순서 등을 나타낸 것 

### 데이터베이스의 설계

사용자의 요구를 분석하여 데이터베이스의 구조에 맞게 변형한 후, DBMS로 데이터베이스를 구현하여 일반 사용자들이 사용하게 하는 것 

### 데이터베이스 설계 시 고려사항

**무결성** : 삽입/삭제/갱신 등 연산 후에도 데이터베이스에 저장된 데이터가 정해진 제약 조건을 항상 만족해야 함 

**일관성** : 응답이 처음부터 끝까지 변합없이 일정해야 함

**회복** : 시스템에 장애가 발생했을 때 장애 발생 직전의 상태로 복구할 수 있어야 함

**보안 :** 불법적인 데이터의 노출, 변경, 손실로부터 보호할 수 있어야 함

**효율성** : 응답시간의 단축, 시스템의 생산성, 저장공간의 최적화 등이 가능해야 함

**데이터베이스 확장** : 데이터베이스 운영에 영향을 주지 않으면서 지속적으로 데이터를 추가할 수 있어야 함

### 데이터베이스 설계 순서

- **요구 조건 분석**
    - 요구 조건 명세서를 작성
        - 사용자의 필요한 용도를 파악
        - 데이터의 종류, 용도, 처리형태, 흐름, 제약조건 수집
- **개념적 설계**
    - 현실 세계에 대한 인식을 추상적 개념으로 표현함
        - 개념스키마
        - 트랜잭션 모델링
        - E-R 모델
- **논리적 설계**
    - 자료를 컴퓨터가 이해하고 처리할 수 있도록 DBMS가 지원하는 논리적 자료 구조로 변환함
        - 개념스키마를 평가 및 정제
        - DBMS에 따라 서로 다른 논리적 스키마 설계
        - 트랜잭션의 인터페이스를 설계
- **물리적 설계**
    - 논리적 구조로 표현된 데이터를 물리적 구조의 데이터로 변환함
        - 데이터베이스 파일의 저장 구조 및 액세스 경로를 결정함
- **구현**
    - 논리적 설계와 물리적 설계에서 도출된 데이터베이스 스키마를 파일로 생성
    - DBMS의 DDL로 데이터베이스 생성
    - 응용 프로그램 트랜잭션 작성

### 데이터 모델

**데이터 모델 구성 요소** : 개체, 속성, 관계

**데이터 모델 종류** : 개념적, 논리적, 물리적 데이터 모델 

**데이터 모델 표시 요소** : 구조(개체 타입들 간의 관계), 연산(실제 데이터를 처리하는 작업), 제약조건

**개념적 데이터 모델** 

- 현실 세계에 대한 인식을 **추상적 개념**으로 표현
- 인간이 이해할 수 있는 **정보 구조로 표현**하기 때문에 정보 모델이라고 함**(E-R모델)**

**논리적 데이터 모델**

- 개념적 모델링 과정에서 얻은 개념적 구조를 **컴퓨터 환경에 맞도록 변환**하는 과정
- **필드**로 기술된 **데이터 타입과 이 데이터 타입들 간의 관계를 이용하여 현실 세계를 표현**
- **데이터 간의 관계 표현에 따라 관계 모델, 계층 모델, 네트워크 모델로 구분**

### 용어 정리

**개체(Entity)**

- 데이터베이스에 표현하려는 것
- 현실 세계의 대상

개체는 독립적으로 존재하거나 그 자체로도 구별이 가능하며, **유일한 식별자**에 의해 식별됨

**개체는 다른 개체와 하나 이상의 관계가 있음** 

**속성(Attribute, 컬럼, 열)** : 개체가 가지고 있는 특성 

- 데이터베이스를 구성하는 가장 작은 논리적 단위(데이터 필드에 해당)
- 속성의 수를 디그리(차수, Degree)라 함

**개체 타입** : 속성으로만 기술된 개체의 정의

**개체 인스턴스** : 하나의 개체(개체 어커런스(OCCURRENCE)라고 함)

**개체 세트** : 개체 인스턴트의 집합

### 속성(Attribute, 컬럼, 열)에 따른 분류

**기본 속성**

- 속성 중 가장 많고 일반적인 속성
- 업무 분석을 통해 정의한 속성

**설계 속성**

- 설계 과정에서 도출해내는 속성
- 업무를 규칙화하기 위해 새로 만들거나 변형하여 정의하는 속성

**파생속성**

- 다른 속성으로부터 계산이나 변형 등의 영향을 받아 발생하는 속성
- 되도록 적은 수를 정의하는 것이 좋음

### 속성의 개체 구성 방식에 따른 분류

**기본 키 속성**

개체를 유일하게 식별할 수 있는 속성

**외래 키 속성**

다른 개체와의 관계에서 포함된 속성

**일반 속성**

개체에 포함되어 있지만 기본 키, 외래키가 아닌 속성

### 관계

개체와 개체 사이의 논리적인 연결

개체 간 관계 , 속성 간 관계

**관계의 형태**

**일대일 1 : 1**  : 개체 집합 A의 각 원소가 개체 집합 B의 각 원소와 한개 씩 대응하는 관계

**일대다 1 : N** : 개체 집합 A의 한 원소가 개체 집합 B의 여러 원소와 대응하는 관계

**다대다 N : N** : 개체 집합 A의 여러 원소가 개체 집합 B의 여러 원소와 대응하는 관계

 

**식별자** : 하나의 개체 내에서 각각의 인스턴스를 유일하게 구분할 수 있는 구분자

모든 개체는 한개 이상의 식별자를 반드시 가져야 함

### 식별자의 종류

**대표성 여부**

- **주 식별자**
    - 개체를 대표하는 유일한 식별자
- **보조 식별자**
    - 주 식별자를 대신하여 개체를 식별할 수 있는 속성

**내부 생성 여부**

- **내부 식별자**
    - 개체 내에서 스스로 만들어지는 식별자
- **외부 식별자**
    - 다른 개체와 관계를 통해 외부에서 가져오는 식별자

**단일 속성 여부**

- **단일 식별자**
    - 주 식별자가 한 가지 속성으로만 구성된 식별자
- **복합 식별자**
    - 주 식별자가 두 개 이상의 속성으로 구성된 식별자

**대체 여부**

- **원조 식별자**
    - 원래의 식별자(본질 식별자)
- **대리 식별자**
    - 주 식별자의 속성이 두 개 이상인 경우, 하나의 속성으로 묶어 사용하는 식별자(인조 식별자)
    

**후보 식별자** : 개체에서 각 인스턴스를 유일하게 식별할 수 있는 속성 또는 속성 집합

하나의 개체에는 한 개 이상의 후보 식별자가 존재할 수 있음

- 이 중 개체의 대표성을 나타내는 식별자를 주 식별자로 지정함
- 나머지는 보조 식별자로 지정함

### 주 식별자의 특징

**유일성** : 개체 내의 모든 인스턴스들은 주 식별자에 의해 유일하게 구분되어야 함

**최소성** : 유일성을 만족시키기에 필요한 최소한의 속성으로만 구성되어야 함

**불변성** : 주 식별자가 특정 개체에 지정되면 그 식별자는 변하지 않아야 함 

**존재성** : 주 식별자가 지정되면 식별자 속성에는 반드시 데이터 값이 존재해야 함 

### 관계형 데이터베이스 E-R모델

1976년 피터 첸에 의해 제안된 개념적 데이터 모델의 가장 대표적인 모델

개체(Entity), 관계(Relationship), 속성(Attribute)으로 데이터를 묘사함

E-R다이어그램으로 표현함

**사각형** : 개체(Entity)

**마름모** : 관계(Relationship)

**타원** : 속성(Attribute)

**이중타원** : 복합속성(다중값 속성)

**밑줄타원** : 기본키

**관계** : N:M등의 개체 간 관계

**선(링크)** : 개체 타입과 속성을 연결 

2차원적인 표(Table)를 이용하여 데이터 상호 관계를 정의하는 데이터베이스로 가장 널리 사용

1970년 IBM의 E.FCodd에 의해 처음 제안

개체와 관계를 모두 릴레이션(Relation)이라는 표로 표현함

**릴레이션**

- 데이터들을 표의 형태로 표현함
- 구조를 나타내는 릴레이션 스키마와 실제 값들인 릴레이션 인스턴스로 구성됨

기본 키와 이를 참조하는 외래키로 데이터 간의 관계를 표현

계층 모델과 망 모델의 복잡한 구조를 단순화시킨 모델

대표적인 언어는 SQL임

1:1, 1:N, N:M 의 관계를 자유롭게 표현

**장점**

- 간결하고 보기 편리
- 다른 데이터베이스로의 반환이 용이

**단점**

- 성능이 다소 떨어짐

**튜플(로우) :** 리레이션을 구성하는 각각의 행, 모든 속성의 모임

- 구성, 파일 구조에서의 레코드와 같은 의미
- 튜플의 수를 카디널리티, 기수, 대응수 라 함

**속성(컬럼Attribute) :** 데이터베이스를 구성하는 가장 작은 논리적 단위(데이터 필드에 해당)

- 개체의 특성을 기술
- 속성의 수를 디그리(차수)라 함

**도메인** : 하나의 속성이 취합할 수 있는 같은 타입의 원자의 집합 값의 범위

- 해당 값의 합법 여부를 검사하는데 이용
- 예시 초등학교 학년 속성이 있을 때 6학년 까지 있으니 1~6의 값이 아닌 값이 들어간다면 X

**릴레이션의 특징 :** 릴레이션에 포함된 튜플들은 모두 상이(구별이 가능해야)하며, 튜플 사이에는 순서가 없음

- 튜플들을 유일하게 식별하기 위해 속성들의 부분집합을 키로 설정함

튜플들의 삽입, 삭제 등의 작업으로 릴레이션은 시간에 따라 변함

릴레이션 스키마를 구성하는 속성들 간의 순서는 중요하지 않음

- 속성의 명칭은 유일해야 하나 속성을 구성하는 값은 중복될 수 있음

속성의 값은 논리적으로 더 이상 쪼갤 수 없는 원자값만을 저장함 

### 키(key) : 조건에 만족하는 튜플을 찾거나 순서대로 정렬할 때의 기준이 되는 속성

키의 종류

**후보 키(Candidate key)**

- 릴레이션을 구성하는 속성들 중 튜플을 유일하게 식별하기 위해 사용되는 속성들의 부분집합
    - 기본 키로 사용될 수 있는 속성들을 의미함
    - 유일성(하나의 키 값으로 하나의 튜플만을 식별)
    - 최소성(최소의 속성으로 구성)을 모두 만족시켜야 함

**대체 키** 

- 후보 키가 둘 이상일 경우 기본 키를 제외한 나머지 후보 키, 보조 키라고도 함

**슈퍼 키** 

- 한 릴레이션 내에 있는 속성들의 집합으로 구성된 키
    - 유일성은 만족하지만 최소성은 만족하지 않음
    - 모든 튜플 중 슈퍼키로 구성된 속성의 집합과 동일한 값은 존재하지 않음

**외래 키** 

- 다른 릴레이션의 기본 키를 참조하는 속성 또는 속성들의 집합
    - 외래 키로 지정되면, 참조 릴레이션의 기본 키에 없는 값은 입력할 수 없음

### 무결성

**무결성(Integrity)** : 데이터베이스에 저장된 데이터 값과 현실 세계의 실제 값이 일치하는 정확성

**무결성 제약 조건** : 부정확한 자료가 데이터베이스 내에 저장되는 것을 방지하기 위한 제약 조건

**애플리케이션, 데이터베이스 트리거(조건발동 기능), 제약 조건**을 이용하여 데이터 무결성을 강화할 수 있음

### 무결성의 종류

**개체 무결성** : 기본 키를 구성하는 어떤 속성도 Null값이나 중복 값을 가질 수 없음

**참조 무결성 :** 외래 키 값은 null이거나 참조 릴레이션의 기본 키 값과 동일해야 함

**도메인 무결성** : 주어진 속성 값이 정의된 도메인에 속해야 함

**사용자 정의 무결성** : 속성 값들이 사용자가 정의한 제약 조건에 만족되어야 함

**NULL 무결성** : 특정 속성 값이 Null이 될 수 없도록 하는 규정

**고유 무결성** : 특정 속성에 대해 각 튜플이 갖는 속성값들이 서로 달라져야 함

**키 무결성 :** 하나의 릴레이션에는 적어도 하나의 키가 존재해야 한다.

**관계 무결성** : 릴레이션에 한 튜플의 삽입 가능 여부 또는 한 릴레이션과 다른 릴레이션의 튜플들 사이의 관계에 대한 적절성 여부를 지정 

### 관계대수 : 원하는 정보와 그 정보를 검색하기 위해 기술하는 절차적인 언어

관계대수는 릴레이션을 처리하기 위해 연산자와 연산 규칙을 제공하며, 피연산자와 연산 결과가 모두 릴레이션임

**순수 관계 연산자**

- s**elect(시그마)**
    - 릴레이션에 존재하는 튜플 중 조건을 만족하는 튜플의 부분집합을 구하여 새로운 릴레이션을 만드는 연산
    - 튜플을 구하는 것이므로 수평 연산이라 함

**일반 집합 연산자**

- **project(파이)**
    - 릴레이션에서 속성 값만을 추출하여 새로운 릴레이션을 만드는 연산
    - 중복이 제거됨, 속성을 추출하는 것으로 수직 연산이라 함
- **join(조인)**
    - 공통 속성을 중심으로 두 개의 릴레이션을 하나로 합쳐서 새로운 릴레이션을 만드는 연산
    - Join의 결과는 Cartesian Product(교차곱)을 수행한 다음 select를 수행한 것과 같음
- **Division(디비전)**
    - 두 릴레이션 사이에 서로 관계가 있는 속성들을 추출하되 앞 릴레이션 속성에서 뒤 릴레이션 속성을 뺀 나머지 속성 값을 추출하여 새 릴레이션을 생성하는 연산자
- **Union(합집합)**
    - 두 릴레이션에 조재하는 튜플의 합집합을 구하되 중복되는 튜플을 제거하는 연산
- **Intersection(교집합)**
    - 두 릴레이션에 존재하는 튜플의 교집합을 구하는 연산
- **Difference(차집합)**
    - 두 릴레이션에 존재하는 튜플의 차집합을 구하는 연산
- **Cartesian Product(교차곱)**
    - 두 릴레이션에 있는 튜플들의 순서쌍을 구하는 연산

관계해석 : 관계 데이터의 연산을 표현하는 방법

원하는 정보가 무엇이라는 것만 정의하는 비절차적인 특성을 지님

### 이상(Anomaly) : 테이블에서 일부 속성들의 종속으로 데이터의 중복이 발생하여 이로 인해 테이블 조작 시 문제가 발생하는 현상

**삽입 이상(Insertion Anomaly)** 

- 테이블에 데이터를 삽입할 때 의도와 상관없이 원하지 않는 값들로 인해 삽입할 수 없게 되는 현상

**삭제 이상(Deletion Anomaly)**

- 한 튜플을 삭제할 때 의도와는 상관없는 값들도 함께 삭제되는 연쇄삭제가 발생하는 현상

**갱신 이상(Update Anomaly)**

- 튜플에 있는 속성 값을 갱신할 때 일부 튜플의 정보만 갱신되어 정보에 불일치성이 생기는 현상
- 예시 모든 3학년 학생들중 일부 3학년 학생이 → 4학년 갱신 되어야 하는데 갱신되지 않음

### 시스템 카탈로그

- 시스템 그 자체에 관련이 있는 다양한 객체에 관한 정보를 포함하는 시스템 데이터베이스
- 사용자를 포함한 DBMS에서 지원하는 모든 데이터 객체에 대한 정의나 명세에 관한 정보를 유지,관리하는 시스템 테이블

카탈로그들이 생성되면 데이터 사전(Data Dictonary)에 저장됨

### 메타데이터 : 시스템 카탈로그에 저장된 정보

메타 데이터의 유형

**데이터베이스 객체 정보**

- 테이블, 인덱스, 뷰 등의 구조 및 통계 정보

**사용자 정보**

- 아이디, 패스워드, 접근 권한 등

**테이블의 무결성 제약 조건 정보**

- 기본 키, 외래 키, Null허용 여부

**기타**

함수, 프로시저, 트리거 등에 대한 정보

### 데이터 딕셔너리 : 데이터 사전에 수록된 데이터에 접근하는데 필요한 정보를 관리 유지하는 시스템

데이터 디렉터리는 시스템만 접근할 수 있음

### 데이터베이스 저장 공간 설계

**테이블** 

- 데이터베이스의 가장 기본적인 객체
- 행과 열로 구성되어 있음
- 데이터는 테이블에 저장됨

**컬럼** 

- 테이블의 열을 구성하는 요소
- 데이터타입, 길이 등으로 정의

**테이블 스페이스** 

- 테이블이 저장되는 논리적인 영역
- 한 개의 테이블스페이스에 한 개 이상의 테이블을 저장할 수 있음

### 테이블 종류

**일반 테이블** 

- 대부분의 DBMS에서 표준 테이블로 사용되는 테이블 형태
- 힙 구조 테이블이라 함

**클러스터드 인덱스 테이블**

- 기본 키나 인덱스키의 순서에 따라 데이터가 저장되는 테이블
- 접근 경로가 단축

**파티셔닝 테이블**

- 대용량의 테이블을 작은 논리적 단위인 파티션으로 나눈 테이블

**외부 테이블**

- 데이터베이스에서 일반 테이블처럼 이용 할 수 있는 외부 파일

**임시 테이블**

- 트랜잭션이나 세션별로 데이터를 저장, 처리할 수 있는 테이블
- 저장된 데이터는 트랜잭션이 종료되면 삭제 됨

### 트랜잭션

- 데이터베이스의 상태를 변환시키는 하나의 논리적 기능을 수행하기 위한 작업의 단위
- 한꺼번에 모두 수행되어야 할 일련의 연산자

### 트랜잭션의 특징

**원자성(Atomicity)**

트랜잭션의 연산은 데이터베이스에 모두 반영되거나 아니면 전혀 반영되지 않아야 한다.

**일관성(Consistency)**

트랜잭션이 실행을 성공적으로 완료하면, 언제나 일관성 있는 데이터베이스 상태로 변환해야 함

**독립성, 격리성, 순차성(Isolation)**

둘 이상의 트랜잭션이 동시에 병행 실행되는 경우, 하나가 실행 중에는 다른 트랜잭션의 연산이 끼어들 수 없음 

**영속성, 지속성(Durability)**

성공적으로 완료된 트랜잭션의 결과는 영구적으로 반영되어야 함

### 트랜잭션 분석

- CRUD 매트릭스를 기반으로 테이블에 발생하는 트랜잭션의 양을 분석하여 DB의 용량산정 및 구조의 최적화를 목적으로 함
- 분석은 업무 개발 담당자가 수행함
- 프로세스가 과도하게 접근하는 테이블을 확인할 수 있고, 집중 접근 테이블을 분산 배치하여 성능 향상을 가져올 수 있음

### 인덱스

데이터 레코드를 빠르게 접근하기 위해<키, 포인터> 쌍으로 구성되는 데이터 구조

인덱스를 통해서 파일의 레코드에 빠르게 액세스 할 수 있음

레코드의 삽입과 삭제가 수시로 일어나는 경우, 인덱스의 수를 최소로 하는 것이 효율적

### 인덱스의 종류

**트리 기반 인덱스** 

- 인덱스를 저장하는 블록들이 트리 구조를 이루고 있는 것

**비트맵 인덱스** 

- 인덱스 칼럼의 데이터를 Bit값인 0 또는 1 로 변환하여 인덱스 키로 사용하는 방법

**함수 기반 인덱스**

- 값 대신 특정 함수나 수식을 컬럼에 적용하여 산출된 값을 사용하는 것

**비트맵 조인 인덱스**

- 다수의 조인된 객체로 구성된 인덱스

**넌 클러스터드 인덱스**

- 인덱스의 키 값만 정렬되어 있고 실제 데이터는 정렬되지 않는 방식
- 삽입, 삭제 발생 시 순서유지를 위해 데이터를 재 정렬해야 함

**클러스터트 인덱스**

- 인덱스 키 순서에 따라 데이터가 정렬되어 저장되는 방식
- 순서대로 저장되어 인덱스를 검색하지 않아도 빠르게 찾을 수 있음

**도메인 인덱스**

- 개발자가 필요한 인덱스를 직접 만들어 사용

### 뷰 : 하나 이상의 기본 테이블로부터 유도된 가상 테이블

저장장치 내에 물리적으로 존재하지 않지만, 사용자에게는 있는 것 처럼 간주

뷰가 정의된 기본 테이블이나 뷰를 삭제하면, 해당 테이블이나 뷰릴 기초로 정의된 다른 뷰도 자동으로 삭제됨

**장점**

- 논리적 데이터 독립성을 제공
- 동일 데이터에 대해 동시에 여러 사용자의 상이한 응용이나 요구 지원이 가능
- 사용자의 데이터 관리를 간단하게 처리
- 접근 제어를 통한 보안이 가능

**단점**

- 독립적인 인덱스를 가질 수 없음
- 뷰의 정의를 변경할 수 없음
- 뷰로 구성된 내용은 삽입, 삭제, 갱신에 제약이 따름

### 파티션 : 대용량의 테이블이나 인덱스를 작은 논리적 단위인 파티션으로 나누는 것

- 데이터 처리는 테이블 단위로 이루어지고
- 데이터 저장은 파티션별로 수행됨

**장점** 

- 데이터 접근 시 액세스 범위를 줄여 쿼리 성능이 향상됨
- 파티션 별로 데이터가 분산돼 디스크의 성능이 향상됨
- 백업 및 복구 속도가 빠름
- 시스템 장애 시 데이터 손상 정도를 최소화함
- 데이터 가용성이 향상됨
- 파티션 단위로 입출력을 분산시킬 수 있음

**단점**

- 하나의 테이블을 세분화하여 세심한 관리가 필요함
- 테이블 간 조인에 대한 비용이 증가
- 용량이 작은 테이블에 파티션을 나누면 성능이 저하
